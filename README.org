-*- mode: org; coding: utf-8; -*-

#+TITLE: README for Conmanv6
This project will resort pack to using MySQL to hold data
direct copy of conmanv5 with supplementation from conmanv2
3/2025


Must:
sudo apt-get install libio-socket-ssl-perl libdigest-hmac-perl libterm-readkey-perl libmime-lite-perl libfile-libmagic-perl libio-socket-inet6-perl



Note conmanv6/conmanv6/conman.go is th executable
conmanv6/conmanv6.scm is the package recipe
      	     

;; https://pubmed.ncbi.nlm.nih.gov/"
;; scp ~/projects/conman/conman.scm mbc@192.168.1.11:/home/mbc/projects/conman/conman.scm




stored procedure new_customer

BEGIN
DECLARE last_customer_id INT DEFAULT 0;
INSERT INTO customer (first_name, last_name, institution, email, product) VALUES(_fname, _lname, _institution, _email, _product);
SET last_customer_id = LAST_INSERT_ID();
UPDATE  payment SET customer_id =last_customer_id, expect=_coin_req  WHERE transaction_id IS NULL AND customer_id IS NULL and currency LIKE _currency LIMIT 1;
SELECT wallet_id INTO @returned_wallet_id FROM payment WHERE customer_id = last_customer_id;
SELECT @returned_wallet_id;

END
